<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Basys Analytics</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#f2a900;

  /* transparent glass default */
  --glass: rgba(10,15,25,.38);

  /* readable text system */
  --text-main: rgba(232,238,248,.92);
  --text-muted: rgba(160,172,188,.82);

  /* selection dot */
  --green: rgba(46, 213, 115, .95);
  --green-border: rgba(46, 213, 115, .45);
  --green-glow: rgba(46, 213, 115, .22);
}

*{margin:0;padding:0;box-sizing:border-box}

html,body{
  height:100%;
  font-family:"Inter",sans-serif;
  color:var(--text-main);
  scroll-behavior:smooth;
}

/* ===== Global City Background (zoomed out) ===== */
body{
  background:none;
  position:relative;
}
body::before{
  content:"";
  position:fixed;
  inset:-12%;
  z-index:-1;
  background:
    linear-gradient(rgba(0,0,0,.32), rgba(0,0,0,.70)),
    url("1000081562.jpg") no-repeat center 40% fixed;
  background-size:cover;
  transform:scale(0.92); /* zoomed out */
  will-change:transform;
}

/* ================= HEADER ================= */
header{
  position:fixed;
  top:0;
  width:100%;
  padding:22px 44px;
  z-index:1000;
  display:flex;
  align-items:center;
  gap:18px;
  background:linear-gradient(to bottom, rgba(0,0,0,.85), transparent);
  transition: padding .25s ease, background .25s ease, backdrop-filter .25s ease, border-color .25s ease;
}
header.scrolled{
  padding:13px 44px;
  background:rgba(10,15,25,.75);
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(255,255,255,.08);
}

/* Mobile burger button */
.nav-toggle{
  display:none;
  margin-left:auto;
  width:44px;
  height:44px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06);
  color:var(--text-main);
  cursor:pointer;
  align-items:center;
  justify-content:center;
}
.nav-toggle svg{display:block}

/* Desktop nav */
nav{
  display:flex;
  gap:26px;
  align-items:center;
  width:100%;
}

nav a, .nav-group-toggle{
  font-size:12px;
  letter-spacing:2px;
  text-transform:uppercase;
  font-weight:800;
  color:var(--text-main);
  opacity:.78;
  text-decoration:none;
  position:relative;
  padding:6px 0;
  transition:.2s;
  background:none;
  border:none;
  cursor:pointer;
}
nav a:hover, .nav-group-toggle:hover{
  opacity:1;
  color:var(--accent);
}

/* Active */
nav a.active{
  opacity:1;
  color:var(--accent);
}
nav a.active::after{
  content:"";
  position:absolute;
  left:0;right:0;bottom:-6px;
  height:2px;
  background:var(--accent);
  border-radius:999px;
  box-shadow:0 0 18px rgba(242,169,0,.25);
}

/* Login right */
.login-link{
  margin-left:auto;
  border:1px solid var(--accent);
  padding:8px 18px;
  border-radius:8px;
  color:var(--accent);
  opacity:1;
}
nav a.login-link.active::after{ display:none; }

/* ===== Initiatives dropdown ===== */
.nav-group{ position:relative; }
.nav-group-toggle{
  display:inline-flex;
  align-items:center;
  gap:8px;
  opacity:.85;
}

.chevron{
  font-size:14px;
  font-weight:900;
  transition:transform .22s ease, color .22s ease;
  opacity:1;
  color:var(--text-main);
  transform: translateY(-1px);
}
.nav-group-toggle:hover .chevron{ color:var(--accent); }
.nav-group.open .chevron{ transform:translateY(-1px) rotate(180deg); }

.nav-group.has-active .nav-group-toggle{
  opacity:1;
  color:var(--accent);
}
.nav-group.has-active .nav-group-toggle::after{
  content:"";
  position:absolute;
  left:0;right:0;bottom:-6px;
  height:2px;
  background:var(--accent);
  border-radius:999px;
  box-shadow:0 0 18px rgba(242,169,0,.25);
}

.nav-group-menu{
  position:absolute;
  top:calc(100% + 10px);
  left:0;
  min-width:240px;

  display:grid;
  gap:6px;
  padding:10px;
  border-radius:14px;

  background:rgba(10,15,25,.78);
  backdrop-filter:blur(14px);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 20px 50px rgba(0,0,0,.55);

  opacity:0;
  transform: translateY(-6px) scale(.98);
  pointer-events:none;
  transition: opacity .20s ease, transform .20s ease;
}
.nav-group.open .nav-group-menu{
  opacity:1;
  transform: translateY(0) scale(1);
  pointer-events:auto;
}
.nav-group-menu a{
  display:block;
  padding:10px 12px;
  border-radius:10px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  font-size:11px;
  letter-spacing:2px;
  text-transform:uppercase;
  font-weight:800;
  color:var(--text-main);
  opacity:.95;
}
.nav-group-menu a:hover{
  background:rgba(242,169,0,.10);
  border-color:rgba(242,169,0,.25);
  color:var(--text-main);
}
.nav-group-menu a.active{
  background:rgba(242,169,0,.12);
  border-color:rgba(242,169,0,.45);
  color:var(--accent);
}
.nav-group-menu a.active::after{ display:none; }

/* ================= SECTIONS ================= */
section{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:145px 10% 115px;
  scroll-margin-top:0px;
}

/* ===== HERO ===== */
#home{
  position:relative;
  overflow:hidden;
  background:#000;
}

/* Star sky base layer (no stripe) */
#home .sky-layer{
  position:absolute;
  inset:-260px;
  background:
    radial-gradient(circle, rgba(255,255,255,.22) 0 1px, rgba(0,0,0,0) 2px) 0 0/140px 140px,
    radial-gradient(circle, rgba(255,255,255,.14) 0 1px, rgba(0,0,0,0) 2px) 60px 90px/220px 220px,
    url("hero-sky.png") no-repeat center top;
  background-size: 140px 140px, 220px 220px, cover;
  background-repeat: repeat, repeat, no-repeat;
  background-color:#000;
  transform: translate3d(0,0,0);
  will-change: transform;
  z-index:0;
}

/* Hero overall shading */
#home::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:1;
  background: linear-gradient(
    to bottom,
    rgba(0,0,0,.18) 0%,
    rgba(0,0,0,.30) 55%,
    rgba(0,0,0,.46) 100%
  );
}

/* Film grain */
#home::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:.05;
  mix-blend-mode:overlay;
  z-index:2;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.45'/%3E%3C/svg%3E");
  background-size:220px 220px;
}

#home > *{ position:relative; z-index:3; }

/* subtle twinkle */
.twinkle{
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:.04;
  mix-blend-mode:overlay;
  background:
    radial-gradient(circle, rgba(255,255,255,.40) 0 1px, rgba(0,0,0,0) 2px) 0 0/160px 160px,
    radial-gradient(circle, rgba(255,255,255,.24) 0 1px, rgba(0,0,0,0) 2px) 60px 90px/220px 220px;
  filter: blur(.50px);
  transform: translateZ(0);
  animation: twinklePan 24s ease-in-out infinite alternate;
  z-index:2;
}
@keyframes twinklePan{
  from{ background-position: 0 0, 60px 90px; }
  to{ background-position: 40px -30px, 100px 40px; }
}

/* Hero stage (20% smaller) */
.hero-stage{
  position:relative;
  width:min(320px, 72vw);
  aspect-ratio: 1 / 1;
  display:flex;
  align-items:center;
  justify-content:center;
  margin-top:-6px;
  container-type: inline-size;
}

@keyframes rotate-earth{
  from{ transform:rotate(0deg); }
  to{ transform:rotate(360deg); }
}

/* Globe rotator */
.globe-rotator{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  animation: rotate-earth 240s linear infinite;
  border-radius:50%;
  overflow:hidden;
  will-change: transform;

  background:
    radial-gradient(circle at 70% 50%,
      rgba(0,0,0,0) 42%,
      rgba(0,0,0,.36) 70%,
      rgba(0,0,0,.58) 100%);

  -webkit-mask-image: radial-gradient(circle, #000 90%, transparent 100%);
  mask-image: radial-gradient(circle, #000 90%, transparent 100%);
}

/* Halo */
.globe-rotator::before{
  content:"";
  position:absolute;
  width:96%;
  height:96%;
  border-radius:50%;
  background: radial-gradient(circle,
    rgba(120,170,255,0.22) 0%,
    rgba(120,170,255,0.10) 36%,
    rgba(0,0,0,0.00) 70%);
  filter: blur(12px);
  opacity:0.60;
  pointer-events:none;
}

/* Atmosphere */
.globe-rotator::after{
  content:"";
  position:absolute;
  inset:4%;
  border-radius:50%;
  box-shadow:
    0 0 16px rgba(120,170,255,.14),
    0 0 34px rgba(120,170,255,.08);
  pointer-events:none;
  opacity:.85;
}

.globe-rotator img{
  position:relative;
  width:110%;
  height:110%;
  object-fit:cover;
  object-position:center;
  border-radius:50%;
  filter:
    drop-shadow(0 26px 55px rgba(0,0,0,.35))
    contrast(0.98)
    saturate(0.92)
    brightness(0.90);
}

/* Hero text inside globe */
.hero-text{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  padding: 0 10%;
  text-align:center;
}
.globe-stack{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:10px;
  width:100%;
}

/* LINE 1: BASYS ANALYTICS (one line) */
.brand.one-line{
  width:100%;
  max-width: 92%;
  display:flex;
  align-items:baseline;
  justify-content:center;
  white-space:nowrap;
  gap:0;
  text-transform:uppercase;
  font-weight:900;
  line-height:1.02;

  font-size: clamp(1.02rem, 6.0cqw, 1.85rem);

  letter-spacing: 0;
  text-shadow:
    0 1px 0 rgba(0,0,0,.55),
    0 2px 12px rgba(0,0,0,.72),
    0 0 26px rgba(0,0,0,.42);
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
}
.brand.one-line .btc{
  color:var(--accent);
  font-weight:900;
  font-size: 1.50em; /* bigger B/A */
  line-height: 0.95;
  text-shadow:
    0 0 10px rgba(242,169,0,.20),
    0 0 20px rgba(242,169,0,.10),
    0 2px 20px rgba(0,0,0,.70);
}
.brand.one-line .analytics-rest{
  color: var(--text-main);
  font-weight:850;
  opacity:1;
  text-shadow: 0 1px 10px rgba(0,0,0,.55);
  transition: color .35s ease;
}
body.scrolled .brand.one-line .analytics-rest{ color: var(--text-muted); }
.brand.one-line .spacer{ display:inline-block; width:.55ch; }

/* LINE 2: Observe | Learn | Lead (vertical dividers, subtle) */
.brand-claim.inline{
  display:flex;
  align-items:baseline;
  justify-content:center;
  gap:12px;
  width:100%;
  max-width: 92%;
  margin-inline:auto;

  font-size: clamp(.72rem, 2.55cqw, .96rem);
  letter-spacing:.08em;

  color: rgba(232,238,248,.98);
  text-shadow:
    0 2px 16px rgba(0,0,0,.62),
    0 0 28px rgba(0,0,0,.38);
}
.brand-claim.inline .word{
  display:inline-flex;
  align-items:baseline;
  justify-content:center;
}
.brand-claim.inline .cap{
  display:inline-block;
  font-size: 1.22em;
  font-weight: 900;
  margin-right: 2px;
  color: var(--accent);
  text-shadow:
    0 0 8px rgba(242,169,0,.12),
    0 2px 16px rgba(0,0,0,.62);
}
.brand-claim.inline .rest{
  text-transform:lowercase;
  font-weight:850;
  color: var(--text-main);
}
body.scrolled .brand-claim.inline .rest{ color: var(--text-muted); }

.vsep{
  width:1px;
  height:15px;
  border-radius:999px;
  background: rgba(242,169,0,.34);
  box-shadow: 0 0 10px rgba(242,169,0,.07);
  opacity:.85;
  transform: translateY(1px);
}

/* Hero claim */
.hero-claim{
  margin-top:18px;
  text-align:center;
  max-width:980px;
  font-size:clamp(.96rem, 1.3vw, 1.14rem);
  letter-spacing:1.5px;
  opacity:.92;
  text-shadow:0 10px 30px rgba(0,0,0,.38);
  white-space:nowrap;
  color:var(--text-main);
}
.hero-claim span{ color:var(--accent); }

/* Scroll arrows */
.scroll-indicator{
  margin-top:36px;
  animation:bounce 2s infinite;
  cursor:pointer;
  display:inline-flex;
  justify-content:center;
  opacity:.95;
  color:var(--text-main);
}
@keyframes bounce{
  0%,20%,50%,80%,100%{ transform:translateY(0); }
  40%{ transform:translateY(-10px); }
}
.scroll-indicator.up{ margin-top:26px; }

/* ===================== CARDS ===================== */
.glass-card{
  background-color: var(--glass);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius:20px;
  padding:44px;
  width:100%;
  max-width:930px;
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 20px 50px rgba(0,0,0,.55);
  transition:
    background-color .35s ease,
    backdrop-filter .35s ease,
    box-shadow .35s ease,
    transform .35s ease;
}
.glass-card:hover{
  background-color: rgba(10,15,25,.22);
  backdrop-filter: blur(26px);
  -webkit-backdrop-filter: blur(26px);
  box-shadow:0 30px 70px rgba(0,0,0,.65);
  transform: translateY(-2px);
}
@media (hover: none){
  .glass-card:hover{
    background-color: var(--glass);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow:0 20px 50px rgba(0,0,0,.55);
    transform: none;
  }
}

.highlight{ color:var(--accent); font-weight:700; }

.summary-box{
  margin-top:16px;
  padding:16px;
  border-left:4px solid var(--accent);
  background:rgba(255,255,255,.05);
  line-height:1.65;
  border-radius:14px;
  color:var(--text-main);
}

.sub-kicker{
  margin-top:10px;
  opacity:.90;
  line-height:1.65;
  font-size:1.0rem;
  color:var(--text-main);
}

/* Small stepper line under Fund intro */
.fund-steps{
  margin-top:10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:flex-start;
  color: rgba(170,184,202,.88);
  font-weight:900;
  letter-spacing:.08em;
  text-transform:uppercase;
  font-size:.72rem;
}
.fund-steps .sep{
  width:6px;height:6px;border-radius:50%;
  background: rgba(242,169,0,.55);
  box-shadow: 0 0 10px rgba(242,169,0,.10);
  opacity:.9;
}

/* ===================== EDUCATION FUND (compact) ===================== */
.pay-row{
  margin-top:16px;
  display:grid;
  grid-template-columns: 1fr;
  gap:10px;
}

/* 2x2 grid */
.pay-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:10px;
}

/* FORCE: all 4 tiles EXACT same size */
.pay-card,
.region-card{
  position:relative;
  text-align:left;
  padding:9px 11px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.035);
  color:var(--text-main);
  transition:.18s;

  height:64px;
  min-height:64px;

  display:flex;
  flex-direction:column;
  justify-content:center;

  overflow:hidden;
}
.pay-card{ cursor:pointer; }
.region-card{ cursor:default; }

.pay-card:hover,
.region-card:hover{
  transform: translateY(-1px);
  border-color: rgba(242,169,0,.22);
  background: rgba(242,169,0,.055);
}
.pay-card.active{
  border-color: rgba(46,213,115,.35);
  background: rgba(46,213,115,.055);
  box-shadow: 0 0 0 1px rgba(46,213,115,.09), 0 14px 34px rgba(0,0,0,.22);
}

.pay-dot{
  position:absolute;
  top:9px;
  right:9px;
  width:9px;height:9px;
  border-radius:999px;
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.18);
}
.pay-card.active .pay-dot{
  background: var(--green);
  border-color: var(--green-border);
  box-shadow: 0 0 12px var(--green-glow);
}

.pay-top{
  display:flex;
  align-items:center;
  gap:8px;
}
.pay-ico{ width:16px;height:16px; opacity:.95; }
.pay-title{
  font-size:.68rem;
  font-weight:900;
  letter-spacing:.10em;
  text-transform:uppercase;
}
.pay-desc{
  margin-top:5px;
  font-size:.78rem;
  line-height:1.2;
  color: rgba(210,220,235,.86);

  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Region tile: keep everything in ONE line inside the fixed height */
.region-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.region-left{
  display:flex;
  align-items:center;
  gap:8px;
  min-width:0;
}
.region-card select{
  width:96px;
  height:30px;
  flex:0 0 auto;

  border:1px solid rgba(255,255,255,.10);
  background: rgba(10,15,25,.18);
  color: var(--text-main);
  border-radius:10px;
  padding:4px 10px;
  outline:none;

  font-weight:900;
  letter-spacing:.04em;
  font-size:.80rem;
}

/* panels */
.fund-panels{ margin-top:14px; }
.fund-panel{ display:none; }
.fund-panel.active{ display:block; }

/* compact fund layout */
.fund-grid{
  margin-top:10px;
  display:grid;
  grid-template-columns: 140px 1fr;
  gap:12px;
  align-items:start;
}

/* QR container */
.qr-wrap{
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.07);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  padding:9px;
  display:flex;
  align-items:center;
  justify-content:center;
}
/* IMPORTANT: prevent QR clipping */
.qr{
  width:128px;
  height:128px;
  border-radius:10px;
  overflow:visible;
  background:#fff;
  border:1px solid rgba(0,0,0,.10);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:6px;
}
.qr img{
  width:100%;
  height:100%;
  display:block;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  transform: translateZ(0);
}

/* address box */
.addr-card{
  width:100%;
  padding:11px 13px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: 0 14px 34px rgba(0,0,0,.28);
}
.addr-label{
  font-size:.70rem;
  font-weight:900;
  letter-spacing:.10em;
  text-transform:uppercase;
  color: rgba(180,195,214,.88);
}
.addr-value{
  margin-top:7px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
  font-size:.94rem;
  letter-spacing:.2px;
  color: var(--text-main);
  line-height:1.45;
  overflow-wrap:anywhere;
  word-break: break-word;
}

/* compact buttons */
.fund-actions{
  margin-top:10px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.action-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:9px 11px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  color:var(--text-main);
  font-weight:900;
  letter-spacing:.06em;
  text-transform:uppercase;
  font-size:.66rem;
  cursor:pointer;
  transition:.18s;
  text-decoration:none;
}
.action-btn:hover{ transform:translateY(-1px); }
.action-btn.primary{
  border-color: rgba(242,169,0,.35);
  background: rgba(242,169,0,.12);
}
.action-btn.primary:hover{
  border-color: rgba(242,169,0,.55);
  background: rgba(242,169,0,.18);
}
.action-btn.card{
  border-color: rgba(242,169,0,.45);
  background: rgba(242,169,0,.14);
}
.action-btn.card:hover{
  border-color: rgba(242,169,0,.60);
  background: rgba(242,169,0,.20);
}

.fund-panel .summary-box{
  margin-top:10px;
  padding:13px;
  font-size:.94rem;
  line-height:1.6;
}

.warn{
  margin-top:10px;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  color: var(--text-muted);
  font-size:.90rem;
  line-height:1.55;
}
.warn strong{ color: var(--text-main); }

.compliance{
  margin-top:12px;
  padding-top:12px;
  border-top:1px solid rgba(255,255,255,.10);
  color:rgba(160,172,188,.80);
  font-size:.86rem;
  line-height:1.55;
}

/* Amount input */
.amount-row{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}
.amount{
  display:flex;
  align-items:center;
  gap:10px;
  padding:9px 11px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(10,15,25,.22);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
}
.amount label{
  font-size:.70rem;
  font-weight:900;
  letter-spacing:.08em;
  text-transform:uppercase;
  opacity:.85;
}
.amount input{
  width:132px;
  padding:0;
  margin:0;
  border:0;
  outline:none;
  background:transparent;
  color:var(--text-main);
  font-weight:900;
  letter-spacing:.02em;
  font-size:.98rem;
}
.amount .unit{
  font-size:.76rem;
  font-weight:900;
  letter-spacing:.08em;
  opacity:.85;
  text-transform:uppercase;
}

/* Reveal */
.reveal{ opacity:0; transform:translateY(14px); transition:opacity .8s ease, transform .8s ease; }
.reveal.in{ opacity:1; transform:translateY(0); }

/* Form */
input, textarea{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.1);
  color:var(--text-main);
  border-radius:10px;
  font-family:inherit;
  outline:none;
}
.btn{
  width:100%;
  padding:15px;
  background:var(--accent);
  border:none;
  border-radius:10px;
  font-weight:900;
  cursor:pointer;
  text-transform:uppercase;
  color:#000;
  transition:.25s;
}
.btn:hover{ background:#d99800; transform:translateY(-2px); }

/* Footer */
footer{
  background:rgba(10,15,25,.90);
  padding:42px 10%;
  text-align:center;
  border-top:1px solid rgba(255,255,255,.10);
  font-size:.85rem;
  color:rgba(160,172,188,.78);
}
.footer-strong{ color:var(--text-main); font-weight:800; letter-spacing:.6px; }
.footer-meta{ margin-top:10px; opacity:.85; }
.footer-tagline{
  margin-top:6px;
  color:rgba(242,169,0,.92);
  letter-spacing:1px;
  text-transform:uppercase;
  font-weight:800;
  font-size:.78rem;
}
.footer-legal{
  margin-top:8px;
  opacity:.75;
  line-height:1.6;
  font-size:.8rem;
}

/* ================= MOBILE MENU ================= */
@media (max-width: 768px){
  header{ padding:16px 16px; }
  header.scrolled{ padding:12px 16px; }
  .nav-toggle{ display:inline-flex; }

  nav{
    position:absolute;
    top:calc(100% + 10px);
    left:16px; right:16px;
    display:grid;
    gap:10px;
    padding:14px;
    border-radius:16px;
    background:rgba(10,15,25,.90);
    border:1px solid rgba(255,255,255,.10);
    backdrop-filter:blur(16px);
    box-shadow:0 20px 50px rgba(0,0,0,.55);
    opacity:0;
    transform:translateY(-8px);
    pointer-events:none;
    transition:.2s;
  }
  header.nav-open nav{
    opacity:1;
    transform:translateY(0);
    pointer-events:auto;
  }

  nav a, .nav-group-toggle{
    width:100%;
    text-align:left;
    padding:12px 12px;
    border-radius:12px;
    background:rgba(255,255,255,.04);
    border:1px solid rgba(255,255,255,.08);
    opacity:.95;
  }
  nav a.active::after{ display:none; }
  nav a.active{ color:var(--accent); }

  .nav-group-menu{
    position:static;
    min-width:unset;
    background:transparent;
    border:none;
    padding:0;
    box-shadow:none;
    opacity:1;
    transform:none;
    pointer-events:auto;
    transition:none;
    display:none;
  }
  .nav-group.open .nav-group-menu{
    display:grid;
    gap:8px;
    padding-top:10px;
  }

  .login-link{ margin-left:0; text-align:center; }

  .fund-grid{ grid-template-columns: 1fr; gap:12px; }
  section{ padding:130px 8% 105px; }
  .glass-card{ padding:34px; }
  .hero-claim{ white-space:normal; letter-spacing:1.2px; line-height:1.35; }
  .hero-stage{ width:min(360px, 78vw); }
}

/* ✅ Desktop + Tablet: keep 2 columns */
@media (max-width: 980px){
  .pay-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
/* ✅ Small phone: 1 column */
@media (max-width: 520px){
  .pay-grid{ grid-template-columns: 1fr; }
}
</style>
</head>

<body>

<header id="siteHeader">
  <button class="nav-toggle" id="navToggle" aria-label="Open menu" aria-expanded="false" type="button">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
      <path d="M4 7h16M4 12h16M4 17h16"></path>
    </svg>
  </button>

  <nav id="siteNav">
    <a href="#home" data-nav="home" class="active">Home</a>
    <a href="#basys" data-nav="basys">Basys</a>
    <a href="#analytics" data-nav="analytics">Analytics</a>

    <div class="nav-group" id="initiativeGroup">
      <button class="nav-group-toggle" aria-expanded="false" type="button">
        Initiatives <span class="chevron">▾</span>
      </button>
      <div class="nav-group-menu" aria-label="Initiatives submenu">
        <a href="#token" data-nav="token">Token</a>
        <a href="#fund" data-nav="fund">Education Fund</a>
      </div>
    </div>

    <a href="#contact" data-nav="contact">Contact</a>
    <a href="/login" class="login-link">Login</a>
  </nav>
</header>

<!-- HOME -->
<section id="home" data-section="home">
  <div class="sky-layer" aria-hidden="true"></div>
  <div class="twinkle" aria-hidden="true"></div>

  <div class="hero-stage reveal">
    <div class="globe-rotator">
      <img src="hero-globe.png" alt="Earth">
    </div>

    <div class="hero-text">
      <div class="globe-stack">

        <!-- LINE 1 -->
        <div class="brand one-line" aria-label="BASYS ANALYTICS">
          <span class="btc">₿</span><span class="analytics-rest">ASYS</span>
          <span class="spacer" aria-hidden="true"></span>
          <span class="btc">A</span><span class="analytics-rest">NALYTICS</span>
        </div>

        <!-- LINE 2 -->
        <div class="brand-claim inline" aria-label="Observe Learn Lead">
          <span class="word"><span class="cap">O</span><span class="rest">bserve</span></span>
          <span class="vsep" aria-hidden="true"></span>
          <span class="word"><span class="cap">L</span><span class="rest">earn</span></span>
          <span class="vsep" aria-hidden="true"></span>
          <span class="word"><span class="cap">L</span><span class="rest">ead</span></span>
        </div>

      </div>
    </div>
  </div>

  <div class="hero-claim reveal">
    From <span>Observation</span> to <span>Leadership</span> in Digital Markets
  </div>

  <a href="#basys" class="scroll-indicator reveal" aria-label="Scroll to Basys">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M7 13l5 5 5-5M7 6l5 5 5-5"></path>
    </svg>
  </a>
</section>

<!-- BASYS -->
<section id="basys" data-section="basys">
  <div class="glass-card reveal">
    <h2 style="color:var(--accent); text-transform:uppercase; letter-spacing:3px; margin-bottom:10px;">Basys</h2>

    <p style="margin-top:6px; opacity:.90; line-height:1.7; font-size:1.02rem; color:var(--text-main);">
      A clear process model for <span class="highlight">Observe · Learn · Lead</span> — turning market behavior into orientation and responsible action.
    </p>

    <div style="margin-top:18px; display:grid; gap:12px;">
      <div style="display:flex; gap:12px; align-items:flex-start;">
        <div style="width:10px;height:10px;border-radius:50%;background:var(--accent);margin-top:7px;flex:0 0 auto;"></div>
        <div><strong>Observe</strong><div style="opacity:.9;margin-top:2px;">Capture market behavior with discipline and consistency.</div></div>
      </div>
      <div style="display:flex; gap:12px; align-items:flex-start;">
        <div style="width:10px;height:10px;border-radius:50%;background:var(--accent);margin-top:7px;flex:0 0 auto;"></div>
        <div><strong>Learn</strong><div style="opacity:.9;margin-top:2px;">Turn signals into understanding and orientation.</div></div>
      </div>
      <div style="display:flex; gap:12px; align-items:flex-start;">
        <div style="width:10px;height:10px;border-radius:50%;background:var(--accent);margin-top:7px;flex:0 0 auto;"></div>
        <div><strong>Lead</strong><div style="opacity:.9;margin-top:2px;">Act responsibly — decisions guided by insight, not noise.</div></div>
      </div>
    </div>
  </div>

  <a href="#analytics" class="scroll-indicator reveal" aria-label="Scroll to Analytics">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M7 13l5 5 5-5M7 6l5 5 5-5"></path>
    </svg>
  </a>
</section>

<!-- ANALYTICS -->
<section id="analytics" data-section="analytics">
  <div class="glass-card reveal">
    <h2 style="color: var(--accent); margin-bottom: 30px; text-transform: uppercase; letter-spacing: 3px;">
      Analytics
    </h2>

    <p style="margin-bottom: 25px; font-size: 1.1rem; line-height: 1.7;">
      <span class="highlight">BasysAnalytics</span> is an analytical system designed for the structured observation,
      interpretation, and classification of crypto and digital asset markets.
      The name <span class="highlight">Basys</span> is derived from Base, Basis, and System,
      representing a stable, methodical foundation.
    </p>

    <p style="margin-bottom: 25px; font-size: 1.1rem; line-height: 1.7;">
      The claim <span class="highlight">Observe Learn Lead</span> describes the internal process:
      Understanding grows from observation, orientation emerges from understanding,
      and responsible leadership arises from orientation.
    </p>

    <p style="font-size: 1.1rem; line-height: 1.7;">
      <span class="highlight">OLL</span> stands for the conceptual guiding model and personally represents
      <span class="highlight">Oliver and Lion Leininger</span>, bridging individual motivation with systematic analysis.
    </p>

    <div class="summary-box">
      <strong>In short:</strong> Basys Analytics combines a stable analytical foundation,
      a clear process of insight, and personal values for responsible decision-making
      in the digital economy.
    </div>
  </div>

  <a href="#token" class="scroll-indicator reveal" aria-label="Scroll to Token">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M7 13l5 5 5-5M7 6l5 5 5-5"></path>
    </svg>
  </a>
</section>

<!-- TOKEN -->
<section id="token" data-section="token">
  <div class="glass-card reveal">
    <h2 style="color:var(--accent); margin-bottom:12px; letter-spacing:3px; text-transform:uppercase;">Token</h2>
    <div class="sub-kicker">
      The Basys token is envisioned as a future mechanism to support education, research, and charitable initiatives — including
      contributions to children-focused educational causes.
    </div>
  </div>

  <a href="#fund" class="scroll-indicator reveal" aria-label="Scroll to Education Fund">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M7 13l5 5 5-5M7 6l5 5 5-5"></path>
    </svg>
  </a>
</section>

<!-- FUND -->
<section id="fund" data-section="fund">
  <div class="glass-card reveal">
    <h2 style="color:var(--accent); margin-bottom:12px; letter-spacing:3px; text-transform:uppercase;">Education Fund</h2>

    <div class="sub-kicker">
      Contributions support independent education and research initiatives.
    </div>

    <div class="fund-steps" aria-label="Payment steps">
      <span>Select payment</span><span class="sep" aria-hidden="true"></span>
      <span>Select amount</span><span class="sep" aria-hidden="true"></span>
      <span>Fund education &amp; research</span>
    </div>

    <div class="pay-row">
      <div class="pay-grid" role="tablist" aria-label="Payment method selector">

        <!-- BTC -->
        <button class="pay-card active" type="button" data-method="btc" role="tab" aria-selected="true">
          <span class="pay-dot" aria-hidden="true"></span>
          <div class="pay-top">
            <svg class="pay-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
              <path d="M12 2v20"></path>
              <path d="M7 7h8a3 3 0 0 1 0 6H7z"></path>
              <path d="M7 13h9a3 3 0 0 1 0 6H7z"></path>
            </svg>
            <div class="pay-title">Bitcoin</div>
          </div>
          <div class="pay-desc">Send BTC directly (on-chain).</div>
        </button>

        <!-- USDT -->
        <button class="pay-card" type="button" data-method="usdt" role="tab" aria-selected="false">
          <span class="pay-dot" aria-hidden="true"></span>
          <div class="pay-top">
            <svg class="pay-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
              <path d="M6 6h12"></path>
              <path d="M12 6v14"></path>
              <path d="M8 10c1.4 1 3.2 1.5 4 1.5s2.6-.5 4-1.5"></path>
            </svg>
            <div class="pay-title">USDT (ERC-20)</div>
          </div>
          <div class="pay-desc">Stablecoin on Ethereum.</div>
        </button>

        <!-- CARD/BANK -->
        <button class="pay-card" type="button" data-method="card" role="tab" aria-selected="false">
          <span class="pay-dot" aria-hidden="true"></span>
          <div class="pay-top">
            <svg class="pay-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
              <rect x="3" y="5" width="18" height="14" rx="2"></rect>
              <path d="M3 10h18"></path>
              <path d="M7 15h3"></path>
            </svg>
            <div class="pay-title">Card / Bank</div>
          </div>
          <div class="pay-desc">Buy BTC &amp; send.</div>
        </button>

        <!-- REGION (same height guaranteed) -->
        <div class="region-card" title="Auto-detected via IP (can be changed)">
          <div class="region-row">
            <div class="region-left">
              <svg class="pay-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                <path d="M12 21s7-4.5 7-11a7 7 0 1 0-14 0c0 6.5 7 11 7 11z"></path>
                <path d="M12 11a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"></path>
              </svg>
              <div class="pay-title">Region</div>
            </div>

            <select id="regionSelect" aria-label="Region select">
              <option value="EU">EU</option>
              <option value="US">US</option>
            </select>
          </div>
        </div>

      </div>
    </div>

    <div class="fund-panels">
      <!-- BTC PANEL -->
      <div class="fund-panel active" id="panelBtc" role="tabpanel" aria-label="Bitcoin panel">
        <div class="summary-box">
          <strong>Bitcoin (On-chain):</strong> Scan the QR code or open your wallet.
        </div>

        <div class="fund-grid">
          <div class="qr-wrap">
            <div class="qr" id="btcQr" aria-label="Bitcoin QR"></div>
          </div>

          <div>
            <div class="addr-card" aria-label="BTC Address">
              <div class="addr-label">BTC Destination Address</div>
              <div class="addr-value" id="btcAddrDisplay"></div>
            </div>

            <div class="fund-actions">
              <a class="action-btn primary" id="openBtcWalletBtn" href="#" rel="noopener">Open Wallet</a>
            </div>
          </div>
        </div>
      </div>

      <!-- USDT PANEL -->
      <div class="fund-panel" id="panelUsdt" role="tabpanel" aria-label="USDT panel">
        <div class="summary-box">
          <strong>USDT (ERC-20):</strong> Send USDT on Ethereum network (ERC-20 only).
        </div>

        <div class="fund-grid">
          <div class="qr-wrap">
            <div class="qr" id="usdtQr" aria-label="USDT ERC-20 QR"></div>
          </div>

          <div>
            <div class="addr-card" aria-label="USDT ERC-20 Address">
              <div class="addr-label">USDT Destination Address (ERC-20)</div>
              <div class="addr-value" id="usdtAddrDisplay"></div>
            </div>

            <div class="fund-actions">
              <a class="action-btn primary" id="openUsdtWalletBtn" href="#" rel="noopener">Open Wallet</a>
            </div>

            <div class="warn">
              <strong>Important:</strong> Only send <strong>USDT</strong> on <strong>Ethereum (ERC-20)</strong>.
            </div>
          </div>
        </div>
      </div>

      <!-- CARD PANEL -->
      <div class="fund-panel" id="panelCard" role="tabpanel" aria-label="Card/Bank panel">
        <div class="summary-box">
          <strong>Credit Card / Bank:</strong> You’ll be redirected to a third-party provider to buy <span class="highlight">BTC</span>
          and send it to the fund address automatically.
        </div>

        <div class="addr-card" style="margin-top:12px;">
          <div class="addr-label">Destination BTC Address (auto-filled)</div>
          <div class="addr-value" id="cardBtcAddrDisplay"></div>
        </div>

        <div class="amount-row">
          <div class="amount">
            <label for="fiatAmount">Amount</label>
            <input id="fiatAmount" inputmode="decimal" placeholder="50" value="50" />
            <div class="unit" id="fiatUnit">EUR</div>
          </div>

          <button class="action-btn card" id="onrampBtn" type="button">
            <svg class="pay-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
              <rect x="3" y="5" width="18" height="14" rx="2"></rect>
              <path d="M3 10h18"></path>
              <path d="M7 15h3"></path>
            </svg>
            Pay with Credit Card
          </button>
        </div>

        <div class="compliance">
          Payments via card/bank are processed by third-party providers. Fees, exchange rates, and KYC/verification requirements may apply depending on region/provider.
        </div>
      </div>
    </div>
  </div>

  <a href="#contact" class="scroll-indicator reveal" aria-label="Scroll to Contact">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M7 13l5 5 5-5M7 6l5 5 5-5"></path>
    </svg>
  </a>
</section>

<!-- CONTACT -->
<section id="contact" data-section="contact">
  <div class="glass-card reveal" style="max-width:550px;">
    <h2 style="color:var(--accent); margin-bottom:18px; text-align:center; letter-spacing:3px; text-transform:uppercase;">
      Contact
    </h2>
    <p style="margin:-8px 0 16px; text-align:center; opacity:.88; line-height:1.6; font-size:.98rem;">
      For inquiries, partnerships, or strategic dialogue.
    </p>

    <form>
      <input type="text" placeholder="Full Name" required>
      <input type="email" placeholder="Email Address" required>
      <textarea rows="5" placeholder="Your Message" required></textarea>
      <button class="btn" type="submit">Send Message</button>
    </form>
  </div>

  <a href="#home" class="scroll-indicator reveal up" aria-label="Back to Home">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M7 11l5-5 5 5M7 18l5-5 5 5"></path>
    </svg>
  </a>
</section>

<footer>
  <div class="footer-strong">Basys Analytics</div>
  <div class="footer-meta">Stuttgart · San Francisco · Santa Fe</div>
  <div class="footer-tagline">Independent Research &amp; Analysis</div>
  <div class="footer-legal">
    BasysAnalytics is a subsidiary of Next-Gen-IT LLC, based in the USA.
  </div>
  <div style="margin-top:10px; opacity:.65;">© 2026 Basys Analytics. All rights reserved.</div>
</footer>

<script>
/* ===================== SOURCE OF TRUTH (REAL ADDRESSES) ===================== */
const BTC_ADDRESS  = 'bc1qgcfpwsn38adym4l5hgzx3j6twstdqa7ffah6hx';
const USDT_ADDRESS = '0xbff372AF02600648f7198A1A25307de3429f1f0F';

function getBtcAddress(){ return BTC_ADDRESS; }
function getUsdtAddress(){ return USDT_ADDRESS; }

/* Header shrink on scroll + body scrolled class */
const header = document.getElementById('siteHeader');
window.addEventListener('scroll', () => {
  const scrolled = window.scrollY > 20;
  header.classList.toggle('scrolled', scrolled);
  document.body.classList.toggle('scrolled', scrolled);
}, { passive:true });

/* Mobile burger */
const navToggle = document.getElementById('navToggle');
const closeNav = () => {
  header.classList.remove('nav-open');
  navToggle?.setAttribute('aria-expanded', 'false');
};
navToggle?.addEventListener('click', () => {
  const open = header.classList.toggle('nav-open');
  navToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
});
document.getElementById('siteNav')?.addEventListener('click', (e) => {
  if (e.target.tagName.toLowerCase() === 'a') closeNav();
});
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeNav(); });

/* Initiatives dropdown */
const group = document.getElementById('initiativeGroup');
const toggle = group?.querySelector('.nav-group-toggle');
toggle?.addEventListener('click', (e) => {
  e.stopPropagation();
  const open = group.classList.toggle('open');
  toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
});
document.addEventListener('click', (e) => {
  if (!group?.contains(e.target)) {
    group?.classList.remove('open');
    toggle?.setAttribute('aria-expanded', 'false');
  }
});
document.querySelectorAll('.nav-group-menu a').forEach(a => {
  a.addEventListener('click', () => {
    group?.classList.remove('open');
    toggle?.setAttribute('aria-expanded', 'false');
  });
});

/* Reveal animations */
const revealEls = document.querySelectorAll('.reveal');
const io = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting){
      entry.target.classList.add('in');
      io.unobserve(entry.target);
    }
  });
}, { threshold: 0.12 });
revealEls.forEach(el => io.observe(el));

/* Active nav on scroll */
const navLinks = Array.from(document.querySelectorAll('#siteNav a[data-nav]'));
const sections = navLinks.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);

function setActive(id){
  navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('data-nav') === id));

  const hasInitiativeActive = (id === 'token' || id === 'fund');
  group?.classList.toggle('has-active', hasInitiativeActive);

  document.querySelectorAll('.nav-group-menu a[data-nav]').forEach(a => {
    a.classList.toggle('active', a.getAttribute('data-nav') === id);
  });
}

function spy(){
  const line = header.getBoundingClientRect().height + 80;
  let current = 'home';
  for(const sec of sections){
    if(sec.getBoundingClientRect().top <= line) current = sec.id;
  }
  setActive(current);
}
window.addEventListener('scroll', () => requestAnimationFrame(spy), { passive:true });
window.addEventListener('load', spy);
window.addEventListener('resize', spy);

/* Parallax (lighter + rAF) */
const sky = document.querySelector('#home .sky-layer');
let rafId = null;
function onParallax(){
  rafId = null;
  if(!sky) return;
  const yRaw = window.scrollY * 0.04;
  const y = Math.max(0, Math.min(60, yRaw));
  sky.style.transform = `translate3d(0, ${-y}px, 0)`;
}
window.addEventListener('scroll', () => {
  if(rafId) return;
  rafId = requestAnimationFrame(onParallax);
}, { passive:true });

/* Anchor scroll: land on card */
function isHashLink(a){
  const href = a.getAttribute('href') || '';
  return href.startsWith('#') && href.length > 1;
}
function scrollToTarget(hash){
  const section = document.querySelector(hash);
  if(!section) return;

  const card = section.querySelector('.glass-card');
  const target = card || section;

  const headerH = header?.offsetHeight || 0;
  const gap = 34;

  const y = target.getBoundingClientRect().top + window.scrollY - (headerH + gap);
  window.scrollTo({ top: Math.max(0, y), behavior: 'smooth' });
}
document.addEventListener('click', (e) => {
  const a = e.target.closest('a');
  if(!a) return;
  if(!isHashLink(a)) return;

  e.preventDefault();
  const hash = a.getAttribute('href');
  closeNav?.();
  scrollToTarget(hash);
});

/* ===================== FUND LOGIC ===================== */
const payCards = Array.from(document.querySelectorAll('.pay-card[data-method]'));
const panels = {
  btc: document.getElementById('panelBtc'),
  usdt: document.getElementById('panelUsdt'),
  card: document.getElementById('panelCard'),
};
function setPayment(method){
  payCards.forEach(btn => {
    const isActive = btn.dataset.method === method;
    btn.classList.toggle('active', isActive);
    btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
  });
  Object.entries(panels).forEach(([key, panel]) => {
    panel?.classList.toggle('active', key === method);
  });
}
payCards.forEach(btn => btn.addEventListener('click', () => setPayment(btn.dataset.method)));

/* URIs */
function btcUri(){ return `bitcoin:${getBtcAddress()}`; }
function usdtUri(){ return `ethereum:${getUsdtAddress()}`; }

/* ALWAYS WORKING QR (bigger source image, placed into padded white box => no clipped corners) */
function renderQrImg(node, text){
  if(!node) return;
  node.innerHTML = '';
  const img = document.createElement('img');
  img.alt = 'QR';
  const data = encodeURIComponent(text);
  img.src = `https://api.qrserver.com/v1/create-qr-code/?size=240x240&ecc=Q&data=${data}`;
  img.referrerPolicy = 'no-referrer';
  node.appendChild(img);
}

function refreshFund(){
  document.getElementById('btcAddrDisplay').textContent = getBtcAddress();
  document.getElementById('usdtAddrDisplay').textContent = getUsdtAddress();
  document.getElementById('cardBtcAddrDisplay').textContent = getBtcAddress();

  renderQrImg(document.getElementById('btcQr'), btcUri());
  renderQrImg(document.getElementById('usdtQr'), getUsdtAddress());

  document.getElementById('openBtcWalletBtn').href = btcUri();
  document.getElementById('openUsdtWalletBtn').href = usdtUri();
}

/* ===================== CARD/BANK ONRAMP ===================== */
const regionSelect = document.getElementById('regionSelect');
const fiatAmount = document.getElementById('fiatAmount');
const fiatUnit = document.getElementById('fiatUnit');
const onrampBtn = document.getElementById('onrampBtn');

function refreshFiatUnit(){
  const region = regionSelect?.value || 'EU';
  if (fiatUnit) fiatUnit.textContent = (region === 'US') ? 'USD' : 'EUR';
}
regionSelect?.addEventListener('change', refreshFiatUnit);

function buildOnrampLink(){
  const region = (regionSelect?.value || 'EU');
  const fiat = region === 'US' ? 'USD' : 'EUR';
  const country = region === 'US' ? 'US' : 'DE';

  const amtRaw = (fiatAmount?.value || '').trim().replace(',', '.');
  const amt = (amtRaw && !isNaN(Number(amtRaw)) && Number(amtRaw) > 0) ? amtRaw : '50';

  const addr = encodeURIComponent(getBtcAddress());

  const base = 'https://buy.onramper.com/';
  const params = new URLSearchParams({
    defaultCrypto: 'BTC',
    defaultFiat: fiat,
    country: country,
    walletAddress: addr,
    defaultAmount: amt
  });

  return `${base}?${params.toString()}`;
}
function refreshOnramp(){
  refreshFiatUnit();
  onrampBtn.dataset.href = buildOnrampLink();
}
regionSelect?.addEventListener('change', refreshOnramp);
fiatAmount?.addEventListener('input', refreshOnramp);

onrampBtn?.addEventListener('click', () => {
  const link = onrampBtn.dataset.href || buildOnrampLink();
  window.open(link, '_blank', 'noopener,noreferrer');
});

/* IP/Geo region autodetect (EU/US) */
async function detectRegionByIP(){
  try{
    const res = await fetch('https://ipapi.co/json/', { cache: 'no-store' });
    if(!res.ok) throw new Error('geo failed');
    const data = await res.json();
    const country = (data && data.country) ? String(data.country).toUpperCase() : '';
    const region = (country === 'US') ? 'US' : 'EU';
    if (regionSelect) regionSelect.value = region;
  }catch(e){
    if (regionSelect) regionSelect.value = 'EU';
  }finally{
    refreshOnramp();
  }
}

window.addEventListener('load', () => {
  refreshFund();
  detectRegionByIP();
  refreshFiatUnit();
  refreshOnramp();
  setPayment('btc');
});
</script>

</body>
</html>
